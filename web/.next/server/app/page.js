(()=>{var e={};e.id=931,e.ids=[931],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},853:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>u,routeModule:()=>f,tree:()=>c}),r(5480),r(2029),r(5866);var o=r(3191),n=r(8716),a=r(7922),l=r.n(a),s=r(5231),i={};for(let e in s)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>s[e]);r.d(t,i);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,5480)),"/Users/canakin/youtube-mcp-server/web/src/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,2029)),"/Users/canakin/youtube-mcp-server/web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],u=["/Users/canakin/youtube-mcp-server/web/src/app/page.tsx"],d="/page",p={require:r,loadChunk:()=>Promise.resolve()},f=new o.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7065:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},3181:()=>{},2490:(e,t,r)=>{Promise.resolve().then(r.bind(r,2689))},4095:e=>{"use strict";let t="undefined"!=typeof Buffer,r=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,o=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function n(e,n,l){null==l&&null!==n&&"object"==typeof n&&(l=n,n=void 0),t&&Buffer.isBuffer(e)&&(e=e.toString()),e&&65279===e.charCodeAt(0)&&(e=e.slice(1));let s=JSON.parse(e,n);if(null===s||"object"!=typeof s)return s;let i=l&&l.protoAction||"error",c=l&&l.constructorAction||"error";if("ignore"===i&&"ignore"===c)return s;if("ignore"!==i&&"ignore"!==c){if(!1===r.test(e)&&!1===o.test(e))return s}else if("ignore"!==i&&"ignore"===c){if(!1===r.test(e))return s}else if(!1===o.test(e))return s;return a(s,{protoAction:i,constructorAction:c,safe:l&&l.safe})}function a(e,{protoAction:t="error",constructorAction:r="error",safe:o}={}){let n=[e];for(;n.length;){let e=n;for(let a of(n=[],e)){if("ignore"!==t&&Object.prototype.hasOwnProperty.call(a,"__proto__")){if(!0===o)return null;if("error"===t)throw SyntaxError("Object contains forbidden prototype property");delete a.__proto__}if("ignore"!==r&&Object.prototype.hasOwnProperty.call(a,"constructor")&&Object.prototype.hasOwnProperty.call(a.constructor,"prototype")){if(!0===o)return null;if("error"===r)throw SyntaxError("Object contains forbidden prototype property");delete a.constructor}for(let e in a){let t=a[e];t&&"object"==typeof t&&n.push(t)}}}return e}function l(e,t,r){let o=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return n(e,t,r)}finally{Error.stackTraceLimit=o}}e.exports=l,e.exports.default=l,e.exports.parse=l,e.exports.safeParse=function(e,t){let r=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return n(e,t,{safe:!0})}catch(e){return null}finally{Error.stackTraceLimit=r}},e.exports.scan=a},8301:e=>{e.exports=function(e,t){let r;if("function"!=typeof e)throw TypeError(`Expected the first argument to be a \`function\`, got \`${typeof e}\`.`);let o=0;return function(...n){clearTimeout(r);let a=Date.now(),l=t-(a-o);l<=0?(o=a,e.apply(this,n)):r=setTimeout(()=>{o=Date.now(),e.apply(this,n)},l)}}},5442:(e,t,r)=>{"use strict";var o=r(7577),n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=o.useState,l=o.useEffect,s=o.useLayoutEffect,i=o.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!n(e,r)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),o=a({inst:{value:r,getSnapshot:t}}),n=o[0].inst,u=o[1];return s(function(){n.value=r,n.getSnapshot=t,c(n)&&u({inst:n})},[e,r,t]),l(function(){return c(n)&&u({inst:n}),e(function(){c(n)&&u({inst:n})})},[e]),i(r),r};t.useSyncExternalStore=void 0!==o.useSyncExternalStore?o.useSyncExternalStore:u},1291:(e,t,r)=>{"use strict";e.exports=r(5442)},2689:(e,t,r)=>{"use strict";let o;r.r(t),r.d(t,{default:()=>eH});var n,a,l=r(326),s=r(7577),i="vercel.ai.error",c=Symbol.for(i),u=class e extends Error{constructor({name:e,message:t,cause:r}){super(t),this[n]=!0,this.name=e,this.cause=r}static isInstance(t){return e.hasMarker(t,i)}static hasMarker(e,t){let r=Symbol.for(t);return null!=e&&"object"==typeof e&&r in e&&"boolean"==typeof e[r]&&!0===e[r]}toJSON(){return{name:this.name,message:this.message}}};n=c;var d=u,p=(Symbol.for("vercel.ai.error.AI_APICallError"),Symbol.for("vercel.ai.error.AI_EmptyResponseBodyError"),"AI_InvalidArgumentError"),f=`vercel.ai.error.${p}`,g=Symbol.for(f),h=class extends d{constructor({message:e,cause:t,argument:r}){super({name:p,message:e,cause:t}),this[a]=!0,this.argument=r}static isInstance(e){return d.hasMarker(e,f)}};function _(e){return null===e||"string"==typeof e||"number"==typeof e||"boolean"==typeof e||(Array.isArray(e)?e.every(_):"object"==typeof e&&Object.entries(e).every(([e,t])=>"string"==typeof e&&_(t)))}a=g,Symbol.for("vercel.ai.error.AI_InvalidPromptError"),Symbol.for("vercel.ai.error.AI_InvalidResponseDataError"),Symbol.for("vercel.ai.error.AI_JSONParseError"),Symbol.for("vercel.ai.error.AI_LoadAPIKeyError"),Symbol.for("vercel.ai.error.AI_LoadSettingError"),Symbol.for("vercel.ai.error.AI_NoContentGeneratedError"),Symbol.for("vercel.ai.error.AI_NoSuchModelError"),Symbol.for("vercel.ai.error.AI_TooManyEmbeddingValuesForCallError"),Symbol.for("vercel.ai.error.AI_TypeValidationError"),Symbol.for("vercel.ai.error.AI_UnsupportedFunctionalityError");let m=(e,t=21)=>(r=t)=>{let o="",n=0|r;for(;n--;)o+=e[Math.random()*e.length|0];return o};var y=r(4095),b=(({prefix:e,size:t=7,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:o="-"}={})=>{let n=m(r,t);if(null==e)return n;if(r.includes(o))throw new h({argument:"separator",message:`The separator "${o}" must not be part of the alphabet "${r}".`});return t=>`${e}${o}${n(t)}`})();Symbol.for("vercel.ai.validator");var{btoa:v,atob:E}=globalThis;Symbol("Let zodToJsonSchema decide on which parser to use");var I={code:"0",name:"text",parse:e=>{if("string"!=typeof e)throw Error('"text" parts expect a string value.');return{type:"text",value:e}}},x={code:"1",name:"function_call",parse:e=>{if(null==e||"object"!=typeof e||!("function_call"in e)||"object"!=typeof e.function_call||null==e.function_call||!("name"in e.function_call)||!("arguments"in e.function_call)||"string"!=typeof e.function_call.name||"string"!=typeof e.function_call.arguments)throw Error('"function_call" parts expect an object with a "function_call" property.');return{type:"function_call",value:e}}},w={code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw Error('"data" parts expect an array value.');return{type:"data",value:e}}},A={code:"3",name:"error",parse:e=>{if("string"!=typeof e)throw Error('"error" parts expect a string value.');return{type:"error",value:e}}},T={code:"4",name:"assistant_message",parse:e=>{if(null==e||"object"!=typeof e||!("id"in e)||!("role"in e)||!("content"in e)||"string"!=typeof e.id||"string"!=typeof e.role||"assistant"!==e.role||!Array.isArray(e.content)||!e.content.every(e=>null!=e&&"object"==typeof e&&"type"in e&&"text"===e.type&&"text"in e&&null!=e.text&&"object"==typeof e.text&&"value"in e.text&&"string"==typeof e.text.value))throw Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},S={code:"5",name:"assistant_control_data",parse:e=>{if(null==e||"object"!=typeof e||!("threadId"in e)||!("messageId"in e)||"string"!=typeof e.threadId||"string"!=typeof e.messageId)throw Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},N={code:"6",name:"data_message",parse:e=>{if(null==e||"object"!=typeof e||!("role"in e)||!("data"in e)||"string"!=typeof e.role||"data"!==e.role)throw Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},R={code:"7",name:"tool_calls",parse:e=>{if(null==e||"object"!=typeof e||!("tool_calls"in e)||"object"!=typeof e.tool_calls||null==e.tool_calls||!Array.isArray(e.tool_calls)||e.tool_calls.some(e=>null==e||"object"!=typeof e||!("id"in e)||"string"!=typeof e.id||!("type"in e)||"string"!=typeof e.type||!("function"in e)||null==e.function||"object"!=typeof e.function||!("arguments"in e.function)||"string"!=typeof e.function.name||"string"!=typeof e.function.arguments))throw Error('"tool_calls" parts expect an object with a ToolCallPayload.');return{type:"tool_calls",value:e}}},k={code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},C={code:"9",name:"tool_call",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("toolName"in e)||"string"!=typeof e.toolName||!("args"in e)||"object"!=typeof e.args)throw Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},j={code:"a",name:"tool_result",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("result"in e))throw Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},O={code:"b",name:"tool_call_streaming_start",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("toolName"in e)||"string"!=typeof e.toolName)throw Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},D={code:"c",name:"tool_call_delta",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("argsTextDelta"in e)||"string"!=typeof e.argsTextDelta)throw Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},F={code:"d",name:"finish_message",parse:e=>{if(null==e||"object"!=typeof e||!("finishReason"in e)||"string"!=typeof e.finishReason)throw Error('"finish_message" parts expect an object with a "finishReason" property.');let t={finishReason:e.finishReason};return"usage"in e&&null!=e.usage&&"object"==typeof e.usage&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:"number"==typeof e.usage.promptTokens?e.usage.promptTokens:Number.NaN,completionTokens:"number"==typeof e.usage.completionTokens?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},L={code:"e",name:"finish_step",parse:e=>{if(null==e||"object"!=typeof e||!("finishReason"in e)||"string"!=typeof e.finishReason)throw Error('"finish_step" parts expect an object with a "finishReason" property.');let t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&null!=e.usage&&"object"==typeof e.usage&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:"number"==typeof e.usage.promptTokens?e.usage.promptTokens:Number.NaN,completionTokens:"number"==typeof e.usage.completionTokens?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&"boolean"==typeof e.isContinued&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},M={[I.code]:I,[x.code]:x,[w.code]:w,[A.code]:A,[T.code]:T,[S.code]:S,[N.code]:N,[R.code]:R,[k.code]:k,[C.code]:C,[j.code]:j,[O.code]:O,[D.code]:D,[F.code]:F,[L.code]:L};I.name,I.code,x.name,x.code,w.name,w.code,A.name,A.code,T.name,T.code,S.name,S.code,N.name,N.code,R.name,R.code,k.name,k.code,C.name,C.code,j.name,j.code,O.name,O.code,D.name,D.code,F.name,F.code,L.name,L.code;var P=[I,x,w,A,T,S,N,R,k,C,j,O,D,F,L].map(e=>e.code),B=e=>{let t=e.indexOf(":");if(-1===t)throw Error("Failed to parse stream string. No separator found.");let r=e.slice(0,t);if(!P.includes(r))throw Error(`Failed to parse stream string. Invalid code ${r}.`);let o=JSON.parse(e.slice(t+1));return M[r].parse(o)};async function*J(e,{isAborted:t}={}){let r=new TextDecoder,o=[],n=0;for(;;){let{value:a}=await e.read();if(a&&(o.push(a),n+=a.length,10!==a[a.length-1]))continue;if(0===o.length)break;let l=function(e,t){let r=new Uint8Array(t),o=0;for(let t of e)r.set(t,o),o+=t.length;return e.length=0,r}(o,n);for(let e of(n=0,r.decode(l,{stream:!0}).split("\n").filter(e=>""!==e).map(B)))yield e;if(null==t?void 0:t()){e.cancel();break}}}function U(e,t){return e&&t&&t.length?{...e,annotations:[...t]}:e}async function V({reader:e,abortControllerRef:t,update:r,onToolCall:o,onFinish:n,generateId:a=b,getCurrentDate:l=()=>new Date}){var s;let i,c;let u=l(),d={},p=[],f=[],g={},h={completionTokens:NaN,promptTokens:NaN,totalTokens:NaN},_="unknown";for await(let{type:n,value:l}of J(e,{isAborted:()=>(null==t?void 0:t.current)===null})){if("error"===n)throw Error(l);if("finish_step"===n){l.isContinued||(i={});continue}if("finish_message"===n){if(_=l.finishReason,null!=l.usage){let{completionTokens:e,promptTokens:t}=l.usage;h={completionTokens:e,promptTokens:t,totalTokens:e+t}}continue}if(null!=i&&("text"===n||"tool_call"===n||"tool_call_streaming_start"===n||"tool_call_delta"===n||"tool_result"===n)&&(d.text&&p.push(d.text),d.function_call&&p.push(d.function_call),d.tool_calls&&p.push(d.tool_calls),d=i,i=void 0),"text"===n&&(d.text?d.text={...d.text,content:(d.text.content||"")+l}:d.text={id:a(),role:"assistant",content:l,createdAt:u}),"tool_call_streaming_start"===n)null==d.text&&(d.text={id:a(),role:"assistant",content:"",createdAt:u}),null==d.text.toolInvocations&&(d.text.toolInvocations=[]),g[l.toolCallId]={text:"",toolName:l.toolName,prefixMapIndex:d.text.toolInvocations.length},d.text.toolInvocations.push({state:"partial-call",toolCallId:l.toolCallId,toolName:l.toolName,args:void 0});else if("tool_call_delta"===n){let e=g[l.toolCallId];e.text+=l.argsTextDelta;let{value:t}=function(e){if(void 0===e)return{value:void 0,state:"undefined-input"};try{return{value:y.parse(e),state:"successful-parse"}}catch(t){try{return{value:y.parse(function(e){let t=["ROOT"],r=-1,o=null;function n(e,n,a){switch(e){case'"':r=n,t.pop(),t.push(a),t.push("INSIDE_STRING");break;case"f":case"t":case"n":r=n,o=n,t.pop(),t.push(a),t.push("INSIDE_LITERAL");break;case"-":t.pop(),t.push(a),t.push("INSIDE_NUMBER");break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":r=n,t.pop(),t.push(a),t.push("INSIDE_NUMBER");break;case"{":r=n,t.pop(),t.push(a),t.push("INSIDE_OBJECT_START");break;case"[":r=n,t.pop(),t.push(a),t.push("INSIDE_ARRAY_START")}}function a(e,o){switch(e){case",":t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break;case"}":r=o,t.pop()}}function l(e,o){switch(e){case",":t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":r=o,t.pop()}}for(let s=0;s<e.length;s++){let i=e[s];switch(t[t.length-1]){case"ROOT":n(i,s,"FINISH");break;case"INSIDE_OBJECT_START":switch(i){case'"':t.pop(),t.push("INSIDE_OBJECT_KEY");break;case"}":r=s,t.pop()}break;case"INSIDE_OBJECT_AFTER_COMMA":'"'===i&&(t.pop(),t.push("INSIDE_OBJECT_KEY"));break;case"INSIDE_OBJECT_KEY":'"'===i&&(t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY"));break;case"INSIDE_OBJECT_AFTER_KEY":":"===i&&(t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE"));break;case"INSIDE_OBJECT_BEFORE_VALUE":n(i,s,"INSIDE_OBJECT_AFTER_VALUE");break;case"INSIDE_OBJECT_AFTER_VALUE":a(i,s);break;case"INSIDE_STRING":switch(i){case'"':t.pop(),r=s;break;case"\\":t.push("INSIDE_STRING_ESCAPE");break;default:r=s}break;case"INSIDE_ARRAY_START":"]"===i?(r=s,t.pop()):(r=s,n(i,s,"INSIDE_ARRAY_AFTER_VALUE"));break;case"INSIDE_ARRAY_AFTER_VALUE":switch(i){case",":t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":r=s,t.pop();break;default:r=s}break;case"INSIDE_ARRAY_AFTER_COMMA":n(i,s,"INSIDE_ARRAY_AFTER_VALUE");break;case"INSIDE_STRING_ESCAPE":t.pop(),r=s;break;case"INSIDE_NUMBER":switch(i){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":r=s;break;case"e":case"E":case"-":case".":break;case",":t.pop(),"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&l(i,s),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]&&a(i,s);break;case"}":t.pop(),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]&&a(i,s);break;case"]":t.pop(),"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&l(i,s);break;default:t.pop()}break;case"INSIDE_LITERAL":{let n=e.substring(o,s+1);"false".startsWith(n)||"true".startsWith(n)||"null".startsWith(n)?r=s:(t.pop(),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]?a(i,s):"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&l(i,s))}}}let s=e.slice(0,r+1);for(let r=t.length-1;r>=0;r--)switch(t[r]){case"INSIDE_STRING":s+='"';break;case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":s+="}";break;case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":s+="]";break;case"INSIDE_LITERAL":{let t=e.substring(o,e.length);"true".startsWith(t)?s+="true".slice(t.length):"false".startsWith(t)?s+="false".slice(t.length):"null".startsWith(t)&&(s+="null".slice(t.length))}}return s}(e)),state:"repaired-parse"}}catch(e){}}return{value:void 0,state:"failed-parse"}}(e.text);d.text.toolInvocations[e.prefixMapIndex]={state:"partial-call",toolCallId:l.toolCallId,toolName:e.toolName,args:t},d.text.internalUpdateId=a()}else if("tool_call"===n){if(null!=g[l.toolCallId]?d.text.toolInvocations[g[l.toolCallId].prefixMapIndex]={state:"call",...l}:(null==d.text&&(d.text={id:a(),role:"assistant",content:"",createdAt:u}),null==d.text.toolInvocations&&(d.text.toolInvocations=[]),d.text.toolInvocations.push({state:"call",...l})),d.text.internalUpdateId=a(),o){let e=await o({toolCall:l});null!=e&&(d.text.toolInvocations[d.text.toolInvocations.length-1]={state:"result",...l,result:e})}}else if("tool_result"===n){let e=null==(s=d.text)?void 0:s.toolInvocations;if(null==e)throw Error("tool_result must be preceded by a tool_call");let t=e.findIndex(e=>e.toolCallId===l.toolCallId);if(-1===t)throw Error("tool_result must be preceded by a tool_call with the same toolCallId");e[t]={...e[t],state:"result",...l}}let e=null;"function_call"===n&&(d.function_call={id:a(),role:"assistant",content:"",function_call:l.function_call,name:l.function_call.name,createdAt:u},e=d.function_call);let t=null;"tool_calls"===n&&(d.tool_calls={id:a(),role:"assistant",content:"",tool_calls:l.tool_calls,createdAt:u},t=d.tool_calls),"data"===n&&f.push(...l);let m=d.text;"message_annotations"===n&&(c?c.push(...l):c=[...l],e=U(d.function_call,c),t=U(d.tool_calls,c),m=U(d.text,c),null!=d.text&&(d.text.internalUpdateId=a())),(null==c?void 0:c.length)&&(d.text&&(d.text.annotations=[...c]),d.function_call&&(d.function_call.annotations=[...c]),d.tool_calls&&(d.tool_calls.annotations=[...c])),r([...p,...[e,t,m].filter(Boolean).map(e=>({...U(e,c)}))],[...f])}return null==n||n({message:d.text,finishReason:_,usage:h}),{messages:[d.text,d.function_call,d.tool_calls].filter(Boolean),data:f}}var Y=()=>fetch;async function W({api:e,body:t,streamProtocol:r="data",credentials:o,headers:n,abortController:a,restoreMessagesOnFailure:l,onResponse:s,onUpdate:i,onFinish:c,onToolCall:u,generateId:d,fetch:p=Y()}){var f,g;let h=await p(e,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",...n},signal:null==(f=null==a?void 0:a())?void 0:f.signal,credentials:o}).catch(e=>{throw l(),e});if(s)try{await s(h)}catch(e){throw e}if(!h.ok)throw l(),Error(null!=(g=await h.text())?g:"Failed to fetch the chat response.");if(!h.body)throw Error("The response body is empty.");let _=h.body.getReader();switch(r){case"text":{let e=function(e){let t=new TextDecoder;return function(e){return e?t.decode(e,{stream:!0}):""}}(),t={id:d(),createdAt:new Date,role:"assistant",content:""};for(;;){let{done:r,value:o}=await _.read();if(r)break;if(t.content+=e(o),i([{...t}],[]),(null==a?void 0:a())===null){_.cancel();break}}return null==c||c(t,{usage:{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN},finishReason:"unknown"}),{messages:[t],data:[]}}case"data":return await V({reader:_,abortControllerRef:null!=a?{current:a()}:void 0,update:i,onToolCall:u,onFinish({message:e,finishReason:t,usage:r}){c&&null!=e&&c(e,{usage:r,finishReason:t})},generateId:d});default:throw Error(`Unknown stream protocol: ${r}`)}}async function $({getStreamedResponse:e,experimental_onFunctionCall:t,experimental_onToolCall:r,updateChatRequest:o,getCurrentMessages:n}){for(;;){let a=await e();if("messages"in a){let e=!1;for(let l of a.messages)if(void 0!==l.function_call&&"string"!=typeof l.function_call||void 0!==l.tool_calls&&"string"!=typeof l.tool_calls){if(e=!0,t){let r=l.function_call;if("object"!=typeof r){console.warn("experimental_onFunctionCall should not be defined when using tools");continue}let a=await t(n(),r);if(void 0===a){e=!1;break}o(a)}if(r){let t=l.tool_calls;if(!Array.isArray(t)||t.some(e=>"object"!=typeof e)){console.warn("experimental_onToolCall should not be defined when using tools");continue}let a=await r(n(),t);if(void 0===a){e=!1;break}o(a)}}if(!e)break}else{let e=function(e){for(let t of e.messages){if(void 0!==t.tool_calls)for(let e of t.tool_calls)"object"==typeof e&&e.function.arguments&&"string"!=typeof e.function.arguments&&(e.function.arguments=JSON.stringify(e.function.arguments));void 0!==t.function_call&&"object"==typeof t.function_call&&t.function_call.arguments&&"string"!=typeof t.function_call.arguments&&(t.function_call.arguments=JSON.stringify(t.function_call.arguments))}};if((void 0===a.function_call||"string"==typeof a.function_call)&&(void 0===a.tool_calls||"string"==typeof a.tool_calls))break;if(t){let r=a.function_call;if("object"!=typeof r){console.warn("experimental_onFunctionCall should not be defined when using tools");continue}let l=await t(n(),r);if(void 0===l)break;e(l),o(l)}if(r){let t=a.tool_calls;if("object"!=typeof t){console.warn("experimental_onToolCall should not be defined when using functions");continue}let l=await r(n(),t);if(void 0===l)break;e(l),o(l)}}}}Symbol.for("vercel.ai.schema");var q=r(1291),G=Object.prototype.hasOwnProperty;let K=new WeakMap,z=()=>{},X=z(),H=Object,Q=e=>e===X,Z=e=>"function"==typeof e,ee=(e,t)=>({...e,...t}),et=e=>Z(e.then),er={},eo={},en="undefined"!=typeof document,ea=()=>!1,el=(e,t)=>{let r=K.get(e);return[()=>!Q(t)&&e.get(t)||er,o=>{if(!Q(t)){let n=e.get(t);t in eo||(eo[t]=n),r[5](t,ee(n,o),n||er)}},r[6],()=>!Q(t)&&t in eo?eo[t]:!Q(t)&&e.get(t)||er]},es=!0,[ei,ec]=[z,z],eu={initFocus:e=>(en&&document.addEventListener("visibilitychange",e),ei("focus",e),()=>{en&&document.removeEventListener("visibilitychange",e),ec("focus",e)}),initReconnect:e=>{let t=()=>{es=!0,e()},r=()=>{es=!1};return ei("online",t),ei("offline",r),()=>{ec("online",t),ec("offline",r)}}},ed=!s.useId,ep=e=>ea()?window.requestAnimationFrame(e):setTimeout(e,1),ef=(0,s.useEffect),eg="undefined"!=typeof navigator&&navigator.connection,eh=false,e_=new WeakMap,em=e=>H.prototype.toString.call(e),ey=(e,t)=>e===`[object ${t}]`,eb=0,ev=e=>{let t,r;let o=typeof e,n=em(e),a=ey(n,"Date"),l=ey(n,"RegExp"),s=ey(n,"Object");if(H(e)!==e||a||l)t=a?e.toJSON():"symbol"==o?e.toString():"string"==o?JSON.stringify(e):""+e;else{if(t=e_.get(e))return t;if(t=++eb+"~",e_.set(e,t),Array.isArray(e)){for(r=0,t="@";r<e.length;r++)t+=ev(e[r])+",";e_.set(e,t)}if(s){t="#";let o=H.keys(e).sort();for(;!Q(r=o.pop());)Q(e[r])||(t+=r+":"+ev(e[r])+",");e_.set(e,t)}}return t},eE=e=>{if(Z(e))try{e=e()}catch(t){e=""}let t=e;return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?ev(e):"",t]},eI=0,ex=()=>++eI;async function ew(...e){let[t,r,o,n]=e,a=ee({populateCache:!0,throwOnError:!0},"boolean"==typeof n?{revalidate:n}:n||{}),l=a.populateCache,s=a.rollbackOnError,i=a.optimisticData,c=e=>"function"==typeof s?s(e):!1!==s,u=a.throwOnError;if(Z(r)){let e=[];for(let o of t.keys())!/^\$(inf|sub)\$/.test(o)&&r(t.get(o)._k)&&e.push(o);return Promise.all(e.map(d))}return d(r);async function d(r){let n;let[s]=eE(r);if(!s)return;let[d,p]=el(t,s),[f,g,h,_]=K.get(t),m=()=>{let e=f[s];return(Z(a.revalidate)?a.revalidate(d().data,r):!1!==a.revalidate)&&(delete h[s],delete _[s],e&&e[0])?e[0](2).then(()=>d().data):d().data};if(e.length<3)return m();let y=o,b=!1,v=ex();g[s]=[v,0];let E=!Q(i),I=d(),x=I.data,w=I._c,A=Q(w)?x:w;if(E&&p({data:i=Z(i)?i(A,x):i,_c:A}),Z(y))try{y=y(A)}catch(e){n=e,b=!0}if(y&&et(y)){if(y=await y.catch(e=>{n=e,b=!0}),v!==g[s][0]){if(b)throw n;return y}b&&E&&c(n)&&(l=!0,p({data:A,_c:X}))}if(l&&!b&&(Z(l)?p({data:l(y,A),error:X,_c:X}):p({data:y,error:X,_c:X})),g[s][1]=ex(),Promise.resolve(m()).then(()=>{p({_c:X})}),b){if(u)throw n;return}return y}}let eA=(e,t)=>{for(let r in e)e[r][0]&&e[r][0](t)},eT=(e,t)=>{if(!K.has(e)){let r=ee(eu,t),o=Object.create(null),n=ew.bind(X,e),a=z,l=Object.create(null),s=(e,t)=>{let r=l[e]||[];return l[e]=r,r.push(t),()=>r.splice(r.indexOf(t),1)},i=(t,r,o)=>{e.set(t,r);let n=l[t];if(n)for(let e of n)e(r,o)},c=()=>{!K.has(e)&&K.set(e,[o,Object.create(null),Object.create(null),Object.create(null),n,i,s])};return c(),[e,n,c,a]}return[e,K.get(e)[4]]},[eS,eN]=eT(new Map),eR=ee({onLoadingSlow:z,onSuccess:z,onError:z,onErrorRetry:(e,t,r,o,n)=>{let a=r.errorRetryCount,l=n.retryCount,s=~~((Math.random()+.5)*(1<<(l<8?l:8)))*r.errorRetryInterval;(Q(a)||!(l>a))&&setTimeout(o,s,n)},onDiscarded:z,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:eh?1e4:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:eh?5e3:3e3,compare:function e(t,r){var o,n;if(t===r)return!0;if(t&&r&&(o=t.constructor)===r.constructor){if(o===Date)return t.getTime()===r.getTime();if(o===RegExp)return t.toString()===r.toString();if(o===Array){if((n=t.length)===r.length)for(;n--&&e(t[n],r[n]););return -1===n}if(!o||"object"==typeof t){for(o in n=0,t)if(G.call(t,o)&&++n&&!G.call(r,o)||!(o in r)||!e(t[o],r[o]))return!1;return Object.keys(r).length===n}}return t!=t&&r!=r},isPaused:()=>!1,cache:eS,mutate:eN,fallback:{}},{isOnline:()=>es,isVisible:()=>{let e=en&&document.visibilityState;return Q(e)||"hidden"!==e}}),ek=(e,t)=>{let r=ee(e,t);if(t){let{use:o,fallback:n}=e,{use:a,fallback:l}=t;o&&a&&(r.use=o.concat(a)),n&&l&&(r.fallback=ee(n,l))}return r},eC=(0,s.createContext)({}),ej=[],eO=e=>Z(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(null===e[1]?e[2]:e[1])||{}],eD=()=>{let e=(0,s.useContext)(eC);return(0,s.useMemo)(()=>ee(eR,e),[e])},eF=ej.concat(e=>(t,r,o)=>{let n=r&&((...e)=>{let[o]=eE(t),[,,,n]=K.get(eS);if(o.startsWith("$inf$"))return r(...e);let a=n[o];return Q(a)?r(...e):(delete n[o],a)});return e(t,n,o)}),eL=(e,t,r)=>{let o=t[e]||(t[e]=[]);return o.push(r),()=>{let e=o.indexOf(r);e>=0&&(o[e]=o[o.length-1],o.pop())}},eM=()=>{};eM(),new WeakMap;let eP=s.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}}),eB={dedupe:!0},eJ=Promise.resolve(X);H.defineProperty(e=>{let{value:t}=e,r=(0,s.useContext)(eC),o=Z(t),n=(0,s.useMemo)(()=>o?t(r):t,[o,r,t]),a=(0,s.useMemo)(()=>o?n:ek(r,n),[o,r,n]),l=n&&n.provider,i=(0,s.useRef)(X);l&&!i.current&&(i.current=eT(l(a.cache||eS),n));let c=i.current;return c&&(a.cache=c[0],a.mutate=c[1]),ef(()=>{if(c)return c[2]&&c[2](),c[3]},[]),(0,s.createElement)(eC.Provider,ee(e,{value:a}))},"defaultValue",{value:eR});let eU=(o=(e,t,r)=>{let{cache:o,compare:n,suspense:a,fallbackData:l,revalidateOnMount:i,revalidateIfStale:c,refreshInterval:u,refreshWhenHidden:d,refreshWhenOffline:p,keepPreviousData:f}=r,[g,h,_,m]=K.get(o),[y,b]=eE(e),v=(0,s.useRef)(!1),E=(0,s.useRef)(!1),I=(0,s.useRef)(y),x=(0,s.useRef)(t),w=(0,s.useRef)(r),A=()=>w.current,T=()=>A().isVisible()&&A().isOnline(),[S,N,R,k]=el(o,y),C=(0,s.useRef)({}).current,j=Q(l)?Q(r.fallback)?X:r.fallback[y]:l,O=(e,t)=>{for(let r in C)if("data"===r){if(!n(e[r],t[r])&&(!Q(e[r])||!n(V,t[r])))return!1}else if(t[r]!==e[r])return!1;return!0},D=(0,s.useMemo)(()=>{let e=!!y&&!!t&&(Q(i)?!A().isPaused()&&!a&&!1!==c:i),r=t=>{let r=ee(t);return(delete r._k,e)?{isValidating:!0,isLoading:!0,...r}:r},o=S(),n=k(),l=r(o),s=o===n?l:r(n),u=l;return[()=>{let e=r(S());return O(e,u)?(u.data=e.data,u.isLoading=e.isLoading,u.isValidating=e.isValidating,u.error=e.error,u):(u=e,e)},()=>s]},[o,y]),F=(0,q.useSyncExternalStore)((0,s.useCallback)(e=>R(y,(t,r)=>{O(r,t)||e()}),[o,y]),D[0],D[1]),L=!v.current,M=g[y]&&g[y].length>0,P=F.data,B=Q(P)?j&&et(j)?eP(j):j:P,J=F.error,U=(0,s.useRef)(B),V=f?Q(P)?Q(U.current)?B:U.current:P:B,Y=(!M||!!Q(J))&&(L&&!Q(i)?i:!A().isPaused()&&(a?!Q(B)&&c:Q(B)||c)),W=!!(y&&t&&L&&Y),$=Q(F.isValidating)?W:F.isValidating,G=Q(F.isLoading)?W:F.isLoading,z=(0,s.useCallback)(async e=>{let t,o;let a=x.current;if(!y||!a||E.current||A().isPaused())return!1;let l=!0,s=e||{},i=!_[y]||!s.dedupe,c=()=>ed?!E.current&&y===I.current&&v.current:y===I.current,u={isValidating:!1,isLoading:!1},d=()=>{N(u)},p=()=>{let e=_[y];e&&e[1]===o&&delete _[y]},f={isValidating:!0};Q(S().data)&&(f.isLoading=!0);try{if(i&&(N(f),r.loadingTimeout&&Q(S().data)&&setTimeout(()=>{l&&c()&&A().onLoadingSlow(y,r)},r.loadingTimeout),_[y]=[a(b),ex()]),[t,o]=_[y],t=await t,i&&setTimeout(p,r.dedupingInterval),!_[y]||_[y][1]!==o)return i&&c()&&A().onDiscarded(y),!1;u.error=X;let e=h[y];if(!Q(e)&&(o<=e[0]||o<=e[1]||0===e[1]))return d(),i&&c()&&A().onDiscarded(y),!1;let s=S().data;u.data=n(s,t)?s:t,i&&c()&&A().onSuccess(t,y,r)}catch(r){p();let e=A(),{shouldRetryOnError:t}=e;!e.isPaused()&&(u.error=r,i&&c()&&(e.onError(r,y,e),(!0===t||Z(t)&&t(r))&&(!A().revalidateOnFocus||!A().revalidateOnReconnect||T())&&e.onErrorRetry(r,y,e,e=>{let t=g[y];t&&t[0]&&t[0](3,e)},{retryCount:(s.retryCount||0)+1,dedupe:!0})))}return l=!1,d(),!0},[y,o]),H=(0,s.useCallback)((...e)=>ew(o,I.current,...e),[]);if(ef(()=>{x.current=t,w.current=r,Q(P)||(U.current=P)}),ef(()=>{if(!y)return;let e=z.bind(X,eB),t=0;A().revalidateOnFocus&&(t=Date.now()+A().focusThrottleInterval);let r=eL(y,g,(r,o={})=>{if(0==r){let r=Date.now();A().revalidateOnFocus&&r>t&&T()&&(t=r+A().focusThrottleInterval,e())}else if(1==r)A().revalidateOnReconnect&&T()&&e();else if(2==r)return z();else if(3==r)return z(o)});return E.current=!1,I.current=y,v.current=!0,N({_k:b}),Y&&!_[y]&&(Q(B),e()),()=>{E.current=!0,r()}},[y]),ef(()=>{let e;function t(){let t=Z(u)?u(S().data):u;t&&-1!==e&&(e=setTimeout(r,t))}function r(){!S().error&&(d||A().isVisible())&&(p||A().isOnline())?z(eB).then(t):t()}return t(),()=>{e&&(clearTimeout(e),e=-1)}},[u,d,p,y]),(0,s.useDebugValue)(V),a){let e=y&&Q(B);if(!ed&&e)throw Error("Fallback data is required when using Suspense in SSR.");e&&(x.current=t,w.current=r,E.current=!1);let o=m[y];if(eP(!Q(o)&&e?H(o):eJ),!Q(J)&&e)throw J;let n=e?z(eB):eJ;!Q(V)&&e&&(n.status="fulfilled",n.value=!0),eP(n)}return{mutate:H,get data(){return C.data=!0,V},get error(){return C.error=!0,J},get isValidating(){return C.isValidating=!0,$},get isLoading(){return C.isLoading=!0,G}}},function(...e){let t=eD(),[r,n,a]=eO(e),l=ek(t,a),s=o,{use:i}=l,c=(i||[]).concat(eF);for(let e=c.length;e--;)s=c[e](s);return s(r,n||l.fetcher||null,l)});var eV=r(8301);function eY(e,t){return null!=t?eV(e,t):e}var eW=async(e,t,r,o,n,a,l,s,i,c,u,d,p,f,g,h,_)=>{var m;let y=l.current;r(t.messages,!1);let b=f?t.messages:t.messages.map(({role:e,content:t,experimental_attachments:r,name:o,data:n,annotations:a,toolInvocations:l,function_call:s,tool_calls:i,tool_call_id:c})=>({role:e,content:t,...void 0!==r&&{experimental_attachments:r},...void 0!==o&&{name:o},...void 0!==n&&{data:n},...void 0!==a&&{annotations:a},...void 0!==l&&{toolInvocations:l},tool_call_id:c,...void 0!==s&&{function_call:s},...void 0!==i&&{tool_calls:i}})),v=n.current;return await W({api:e,body:null!=(m=null==g?void 0:g({messages:t.messages,requestData:t.data,requestBody:t.body}))?m:{messages:b,data:t.data,...a.current.body,...t.body,...void 0!==t.functions&&{functions:t.functions},...void 0!==t.function_call&&{function_call:t.function_call},...void 0!==t.tools&&{tools:t.tools},...void 0!==t.tool_choice&&{tool_choice:t.tool_choice}},streamProtocol:c,credentials:a.current.credentials,headers:{...a.current.headers,...t.headers},abortController:()=>s.current,restoreMessagesOnFailure(){_||r(y,!1)},onResponse:d,onUpdate(e,n){r([...t.messages,...e],!1),o([...null!=v?v:[],...null!=n?n:[]],!1)},onToolCall:p,onFinish:u,generateId:i,fetch:h})};function e$(e){return"assistant"===e.role&&e.toolInvocations&&e.toolInvocations.length>0&&e.toolInvocations.every(e=>"result"in e)}async function eq(e){if(null==e)return[];if(e instanceof FileList)return Promise.all(Array.from(e).map(async e=>{let{name:t,type:r}=e;return{name:t,contentType:r,url:await new Promise((t,r)=>{let o=new FileReader;o.onload=e=>{var r;t(null==(r=e.target)?void 0:r.result)},o.onerror=e=>r(e),o.readAsDataURL(e)})}}));if(Array.isArray(e))return e;throw Error("Invalid attachments type")}var eG=function({api:e="/api/chat",id:t,initialMessages:r,initialInput:o="",sendExtraMessageFields:n,experimental_onFunctionCall:a,experimental_onToolCall:l,onToolCall:i,experimental_prepareRequestBody:c,experimental_maxAutomaticRoundtrips:u=0,maxAutomaticRoundtrips:d=u,maxToolRoundtrips:p=d,maxSteps:f=null!=p?p+1:1,streamMode:g,streamProtocol:h,onResponse:_,onFinish:m,onError:y,credentials:v,headers:E,body:I,generateId:x=b,fetch:w,keepLastMessageOnError:A=!1,experimental_throttle:T}={}){g&&(null!=h||(h="text"===g?"text":void 0));let S=(0,s.useId)(),N=null!=t?t:S,R="string"==typeof e?[e,N]:N,[k]=(0,s.useState)([]),{data:C,mutate:j}=eU([R,"messages"],null,{fallbackData:null!=r?r:k}),O=(0,s.useRef)(C||[]);(0,s.useEffect)(()=>{O.current=C||[]},[C]);let{data:D,mutate:F}=eU([R,"streamData"],null),L=(0,s.useRef)(D);(0,s.useEffect)(()=>{L.current=D},[D]);let{data:M=!1,mutate:P}=eU([R,"loading"],null),{data:B,mutate:J}=eU([R,"error"],null),U=(0,s.useRef)(null),V=(0,s.useRef)({credentials:v,headers:E,body:I});(0,s.useEffect)(()=>{V.current={credentials:v,headers:E,body:I}},[v,E,I]);let Y=(0,s.useCallback)(async t=>{let r=O.current.length;try{P(!0),J(void 0);let r=new AbortController;U.current=r,await $({getStreamedResponse:()=>eW(e,t,eY(j,T),eY(F,T),L,V,O,U,x,h,m,_,i,n,c,w,A),experimental_onFunctionCall:a,experimental_onToolCall:l,updateChatRequest:e=>{t=e},getCurrentMessages:()=>O.current}),U.current=null}catch(e){if("AbortError"===e.name)return U.current=null,null;y&&e instanceof Error&&y(e),J(e)}finally{P(!1)}let o=O.current,s=o[o.length-1];o.length>r&&null!=s&&f>1&&e$(s)&&function(e){let t=0;for(let r=e.length-1;r>=0;r--)if("assistant"===e[r].role)t++;else break;return t}(o)<f&&await Y({messages:o})},[j,P,e,V,_,m,y,J,F,L,h,n,a,l,c,i,f,O,U,x,w,A,T]),W=(0,s.useCallback)(async(e,{options:t,functions:r,function_call:o,tools:n,tool_choice:a,data:l,headers:s,body:i,experimental_attachments:c}={})=>{var u,d;e.id||(e.id=x());let p=await eq(c),f={headers:null!=s?s:null==t?void 0:t.headers,body:null!=i?i:null==t?void 0:t.body};return Y({messages:O.current.concat({...e,id:null!=(u=e.id)?u:x(),createdAt:null!=(d=e.createdAt)?d:new Date,experimental_attachments:p.length>0?p:void 0}),options:f,headers:f.headers,body:f.body,data:l,...void 0!==r&&{functions:r},...void 0!==o&&{function_call:o},...void 0!==n&&{tools:n},...void 0!==a&&{tool_choice:a}})},[Y,x]),q=(0,s.useCallback)(async({options:e,functions:t,function_call:r,tools:o,tool_choice:n,data:a,headers:l,body:s}={})=>{if(0===O.current.length)return null;let i={headers:null!=l?l:null==e?void 0:e.headers,body:null!=s?s:null==e?void 0:e.body};return"assistant"===O.current[O.current.length-1].role?Y({messages:O.current.slice(0,-1),options:i,headers:i.headers,body:i.body,data:a,...void 0!==t&&{functions:t},...void 0!==r&&{function_call:r},...void 0!==o&&{tools:o},...void 0!==n&&{tool_choice:n}}):Y({messages:O.current,options:i,headers:i.headers,body:i.body,data:a,...void 0!==t&&{functions:t},...void 0!==r&&{function_call:r},...void 0!==o&&{tools:o},...void 0!==n&&{tool_choice:n}})},[Y]),G=(0,s.useCallback)(()=>{U.current&&(U.current.abort(),U.current=null)},[]),K=(0,s.useCallback)(e=>{"function"==typeof e&&(e=e(O.current)),j(e,!1),O.current=e},[j]),z=(0,s.useCallback)(e=>{"function"==typeof e&&(e=e(L.current)),F(e,!1),L.current=e},[F]),[X,H]=(0,s.useState)(o),Q=(0,s.useCallback)(async(e,t={},r)=>{var o,n,a,l,s;if(null==(o=null==e?void 0:e.preventDefault)||o.call(e),!X&&!t.allowEmptySubmit)return;r&&(V.current={...V.current,...r});let i=await eq(t.experimental_attachments),c={headers:null!=(a=t.headers)?a:null==(n=t.options)?void 0:n.headers,body:null!=(s=t.body)?s:null==(l=t.options)?void 0:l.body};Y({messages:X||i.length||!t.allowEmptySubmit?O.current.concat({id:x(),createdAt:new Date,role:"user",content:X,experimental_attachments:i.length>0?i:void 0}):O.current,options:c,headers:c.headers,body:c.body,data:t.data}),H("")},[X,x,Y]),Z=({toolCallId:e,result:t})=>{let r=O.current.map((r,o,n)=>o===n.length-1&&"assistant"===r.role&&r.toolInvocations?{...r,toolInvocations:r.toolInvocations.map(r=>r.toolCallId===e?{...r,result:t}:r)}:r);j(r,!1),e$(r[r.length-1])&&Y({messages:r})};return{messages:C||[],setMessages:K,data:D,setData:z,error:B,append:W,reload:q,stop:G,input:X,setInput:H,handleInputChange:e=>{H(e.target.value)},handleSubmit:Q,isLoading:M,addToolResult:Z,experimental_addToolResult:Z}},eK=r(5419),ez=r.n(eK);let eX=['Curate an "Intro to Python" playlist with 5 tutorials','Summarize my "Intro to Python" playlist',"Search for Python tutorial videos"];function eH(){let{messages:e,input:t,handleInputChange:r,handleSubmit:o,isLoading:n,error:a}=eG({api:"/api/chat"});return(0,l.jsxs)("main",{className:ez().main,children:[l.jsx("div",{className:ez().logo,"aria-hidden":!0,children:l.jsx("svg",{className:ez().logoIcon,viewBox:"0 0 24 24",role:"img","aria-label":"Play icon",children:l.jsx("path",{d:"M8 5v14l11-7z"})})}),(0,l.jsxs)("div",{style:{textAlign:"center",maxWidth:560},children:[l.jsx("h1",{className:ez().title,children:"YouTube AI Agent"}),l.jsx("p",{className:ez().subtitle,children:"Your YouTube AI Agent helping you to create the best playlists"})]}),(0,l.jsxs)("section",{style:{width:"100%"},children:[l.jsx("h2",{style:{textAlign:"center",color:"#777",fontSize:"0.95rem",fontWeight:500,marginBottom:18},children:"Try asking:"}),l.jsx("div",{className:ez().suggestions,children:eX.map(e=>l.jsx("div",{className:ez().suggestionTag,"aria-hidden":!0,children:e},e))})]}),(0,l.jsxs)("section",{className:ez().chatWrapper,children:[(0,l.jsxs)("div",{className:ez().messages,children:[e.filter(e=>"string"==typeof e.content?e.content.trim().length>0:null!=e.content).map(e=>l.jsx("div",{className:`${ez().message} ${"user"===e.role?ez().userMessage:ez().assistantMessage}`,children:"string"==typeof e.content?e.content:String(e.content)},e.id)),n&&l.jsx("div",{className:ez().loadingMessage,children:l.jsx("span",{className:ez().loadingDot,"aria-hidden":!0})})]}),(0,l.jsxs)("form",{className:ez().form,onSubmit:o,children:[l.jsx("textarea",{className:ez().textarea,placeholder:"Ask me to curate or manage your YouTube playlists...",value:t,onChange:r,disabled:n}),l.jsx("button",{className:ez().sendButton,type:"submit","aria-label":"Send message",disabled:n||0===t.trim().length,children:l.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:l.jsx("path",{d:"M3.40005 20.4L20.5 12L3.40005 3.59998L3.40005 10.2L15.2 12L3.40005 13.8L3.40005 20.4Z",fill:"white"})})})]}),l.jsx("div",{className:ez().status,children:n?"Thinking...":a?`Error: ${a.message??"Something went wrong."}`:""})]})]})}},5419:e=>{e.exports={main:"page_main__GlU4n",logo:"page_logo__7fc9l",logoIcon:"page_logoIcon__vIYln",title:"page_title__3jonF",subtitle:"page_subtitle__iAJUg",suggestions:"page_suggestions__EYdNQ",suggestionTag:"page_suggestionTag__4YuMy",chatWrapper:"page_chatWrapper__uqFTO",messages:"page_messages__chTI9",message:"page_message__abnJo",userMessage:"page_userMessage__GHiXg",assistantMessage:"page_assistantMessage__YLc4X",loadingMessage:"page_loadingMessage__qCwow",loadingDot:"page_loadingDot__d71_D",pulse:"page_pulse__U_e85",form:"page_form__Ou5d6",textarea:"page_textarea__8C2wx",sendButton:"page_sendButton__SWOvK",status:"page_status___nccx"}},2029:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a,metadata:()=>n});var o=r(9510);r(5023);let n={title:"YouTube AI Agent",description:"Manage your YouTube playlists with an AI agent powered by MCP tools."};function a({children:e}){return o.jsx("html",{lang:"en",children:o.jsx("body",{children:e})})}},5480:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});let o=(0,r(8570).createProxy)(String.raw`/Users/canakin/youtube-mcp-server/web/src/app/page.tsx#default`)},5023:()=>{}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[948,471],()=>r(853));module.exports=o})();